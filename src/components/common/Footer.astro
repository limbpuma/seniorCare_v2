---
import Icon from "../common/Icon.astro";
import Logo from "./Logo.astro";
import texts from "@/utils/texts.json";

// Check if we're on the landing page to use anchor links
const Navlinks = [
  { name: "About", href: "about", anchor: "#about" },
  { name: "Services", href: "services", anchor: "#services" },
  { name: "Contact", href: "contact", anchor: "#contact" },
  { name: "FAQ", href: "faq", anchor: "#faq" },
];
const Legallinks = [
  { name: "Impressum", href: "legal", anchor: null },
  { name: "Datenschutz", href: "privacypolicy", anchor: null },
  { name: "Agbs", href: "termsconditions", anchor: null },
];

const footerTexts = texts.footer;
const { isLandingPage } = Astro.props;
---

<footer class="bg-deep-blue mx-auto px-4">
  <div class="container mx-auto p-4 py-6 lg:py-8">
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
      <div class="footer-top mb-6 md:mb-0">
        <a
          href="/"
          class="flex justify-center md:justify-start items-center mb-4"
        >
          <Logo class="h-12 max-w-fit" color="white" />
        </a>
        <p
          class="text-white font-ag-body-text text-ag-body-text mb-4 text-center md:text-left lg:w-11/12"
        >
          {footerTexts.slogan}
        </p>
        <div
          class="flex justify-center md:justify-start space-x-2 text-soft-orange"
        >
          <Icon
            icons={[
              { name: "facebook", href: footerTexts.socialLinks.facebook },
              { name: "twitter", href: footerTexts.socialLinks.twitter },
              { name: "instagram", href: footerTexts.socialLinks.instagram },
            ]}
            size="small"
            variant="accent"
          />
        </div>
      </div>

      <div class="text-center md:text-left">
        <h5 class="mb-6 text-soft-orange font-ag-h5 text-ag-h5">
          {footerTexts.linksTitle}
        </h5>        <ul class="text-white font-ag-body-text text-ag-body-text">
          {
            Navlinks.map((link) => (
              <li class="mb-4">
                <a 
                  href={isLandingPage ? link.anchor : link.href} 
                  class="hover:underline nav-link"
                  data-anchor={isLandingPage ? "true" : undefined}
                  aria-current="false"
                >
                  {link.name}
                </a>
              </li>
            ))
          }
        </ul>
      </div>

      <div class="text-center md:text-left">
        <h5 class="mb-6 text-soft-orange font-ag-h5 text-ag-h5">
          {footerTexts.scheduleTitle}
        </h5>
        <p class="text-white font-ag-body-text text-ag-body-text mb-4">
          {footerTexts.schedule}
        </p>
        <a
          href={`tel:${footerTexts.phone}`}
          class="text-white font-ag-body-text text-ag-body-text hover:underline"
        >
          <Icon icons={[{ name: "phone" }]} size="small" variant="accent" />
          {footerTexts.phone}
        </a>
      </div>

      <div class="text-center md:text-left">
        <h5 class="mb-6 text-soft-orange font-ag-h5 text-ag-h5">
          {footerTexts.locationTitle}
        </h5>
        <p class="text-white font-ag-body-text text-ag-body-text mb-4">
          {footerTexts.address}
        </p>
        <a
          href={footerTexts.mapLink}
          target="_blank"
          rel="noopener noreferrer"
          class="text-white font-ag-body-text text-ag-body-text hover:underline"
        >
          <Icon icons={[{ name: "mapMarker" }]} size="small" variant="accent" />
          {footerTexts.viewMap}
        </a>
      </div>
    </div>

    <hr class="my-6 border-gray-200 sm:mx-auto dark:border-gray-700 lg:my-8" />

    <div
      class="sm:flex sm:items-center sm:justify-between text-center md:text-left text-white font-ag-body-text text-ag-body-text"
    >
      <span>{footerTexts.copyright}</span>      <div class="flex mt-4 sm:mt-0 justify-center md:justify-start space-x-4">
        {
          Legallinks.map((link) => (
            <a href={link.href} class="hover:underline">
              {link.name}
            </a>
          ))
        }
      </div>    </div>
  </div>
</footer>

<style>
  .nav-link.active {
    color: #f0f0f0;
    font-weight: bold;
    position: relative;
  }
  
  .nav-link.active::after {
    content: "";
    position: absolute;
    bottom: -3px;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: #ffa500;
    display: block;
  }
</style>
